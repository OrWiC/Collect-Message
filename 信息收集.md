# 信息收集
### 资产收集
给我们的是一个公司或者组织的名字，让我们以这个公司为目标做红蓝对抗。
#### fofa/shodan/zoomeye的使用

##### https://fofa.so/

FOFA 搜索引擎检索到的内容主要是服务器，数据库，某个网站管理后台，路由器，交换机，公共ip的打印机，网络摄像头，门禁系统，Web服务等等。 这类搜索引擎又有另一个名字：网络空间测绘系统。

![image-20211202162151585](信息收集/image-20211202162151585.png)

例如Apache出来了一个高危漏洞，受影响的版本号为2.4.23,我们需要去本公司可能受此漏洞影响的Apache服务器，那么我们可以使用高级查询语句server==”Apache/2.4.23”&&domain=”xxx.com”，搜索结果即为本公司域名下的所有子域名可能存在Apache2.4.23版本漏洞的URL，安全人员可以对结果进行检查，及时修复漏洞。（详细语法可在网页搜索框下方点击“查询语法”）

![image-20211202133448002](信息收集/image-20211202133448002.png)

特点

1.支持API查询接口，便于进行程序间的自动化查询、处理功能，进行进一步的业务分析。

​	用法：所有调用都需要提供身份信息，主要是email和key，email主要是注册和登陆时填写的email，key需要用户到个人中心获取32位的hash值，即为API KEY。将上面的两个信息填入api接口中，即可获取json格式的数据。

2.支持下载功能

​	用法：搜索到结果之后可在右侧选择下载功能，可下载搜索到的所有数据，下载的格式支持CSV，JSON，XML格式，方便程序调用进行全网扫描。

注意

1) 普通会员和高级会员的 免费100条 和 免费10000条 是指每天调用API可以免费获取前100条和前10000条,假设高级会员调用API,每页获取3333条，第1、2、3页由于没有超过前10000条，所以免费，第4页超过前10000条，所以会扣除1FOFA币。
2) 直接下载数据，无论多少条数据，都要花费FOFA币。
   普通会员300 高级会员1000 终身制 。

##### https://www.shodan.io/

**Shodan是用于搜索连接到互联网的设备的工具。**

与搜索引擎可以帮助你找到网站不同，Shodan可以帮助你找到有关台式机,服务器，loT设备等的信息。此信息包括元数据，例如在每个设备上运行的软件。
Shodan的常见用途包括网络安全，市场研究，网络风险，扫描loT设备和跟踪勒索软件。

连接shodan的方法有很多，比如网站、官方的python命令行界面工具和库，各种语言的社区驱动库以及官方的REST API与Shodan，此处主要介绍网站。

![image-20211202132813478](信息收集/image-20211202132813478.png)

![image-20211202134405344](信息收集/image-20211202134405344.png)

它的工作方式类似于CLI工具的搜索命令，但带有精美的WebUI来显示结果。它显示每个主机的摘要，与查询匹配的主机总数(如CLI的count命令）和一些统计信息(如stats命令)。

选择主机后，可以看到快照规范表，漏洞影响主机，开放端口和开放端口标识信息（如下）。

![image-20211202155658238](信息收集/image-20211202155658238.png)

##### https://www.zoomeye.org/（推荐）

**ZoomEye是一款针对网络空间的搜索引擎，收录了互联网空间中的设备、网站及其使用的服务或组件等信息。**

**ZoomEye** 拥有两大探测引擎：**Xmap** 和 **Wmap**，分别针对网络空间中的设备及网站，通过 24 小时不间断的探测、识别，标识出互联网设备及网站所使用的服务及组件。研究人员可以通过 ZoomEye 方便的了解组件的普及率及漏洞的危害范围等信息。

虽然被称为 “黑客友好” 的搜索引擎，但ZoomEye 并不会主动对网络设备、网站发起攻击，收录的数据也仅用于安全研究。ZoomEye更像是互联网空间的一张航海图。ZoomEye兼具信息收集的功能与漏洞信息库的资源，对于广大的渗透测试爱好者来说以一件非常不错的利器。

![image-20211202160307485](信息收集/image-20211202160307485.png)

![image-20211202163727240](信息收集/image-20211202163727240.png)

zoomeye所收集的信息比较全，不仅提供网站ip，端口使用设备，地区分布等等，甚至还会给出各大组件、服务器系统等存在的历史性漏洞的描述文档，如果使用漏洞的描述性文档中所给出的指示性内容，那么就可以找寻目标进行攻击了！

##### 使用手册

针对不同的信息需要，搜索时会有对应的查询语句

fofa：网站自带查询语句（搜索框下方）

shodan：https://www.jianshu.com/p/0c184915c118

zoomeye:https://blog.csdn.net/ncafei/article/details/63683377

#### 搜索引擎

##### google hack

google hack是指使用[Google](https://baike.baidu.com/item/Google)等搜索引擎对某些特定的网络主机漏洞（通常是服务器上的脚本漏洞）进行搜索，以达到快速找到漏洞主机或特定主机的漏洞的目的。

###### 介绍

Google毫无疑问是当 今世界上最强大的搜索引擎。然而，在黑客手中，它也是一个秘密武器，它能搜索到一些你意想不到的信息。赛迪编者把 他们进行了简单的总结不是希望您利用他去攻击别人的网站，而是利用这些技巧去在浩如烟海的网络信息中，来个大海捞针，寻找到对您有用的信息。

在SEO优化中,通常使用这种技术达到入侵一些网站挂外链之用。[黑帽SEO](https://baike.baidu.com/item/黑帽SEO/6111825)手法用来做[google优化](https://baike.baidu.com/item/google优化/8285781)推广和百度优化推广，应用得当，效果是十分明显的。 SEO俗语：不管白猫黑猫，抓到耗子就是好猫。

###### 基本命令

### googlehack 常用语法

site    指定域名

![20211231155607](信息收集/20211231155607.png)

intext  正文中存在关键字的网页

![20211231155114](信息收集/20211231155114.png)



intitle  标题中存在关键字的网页

![20211231154920](信息收集/20211231154920.png)

info    一些基本信息

![20211231162117](信息收集/20211231162117.png)

inurl   URL存在关键字的网页

![20211231155902](信息收集/20211231155902.png)

filetype 搜索指定文件类型

![20211231161426](信息收集/20211231161426.png)



site:xx.com 返回所有与该站有关的url

![20211231155607](信息收集/20211231155607.png)

link:xx.com 返回所有与该站做了链接的站

![20211231160032](信息收集/20211231160032.png)

site:xx.com filetype:txt 查找TXT文件 

![20211231162009](信息收集/20211231162009.png)

其他的以此类推自由组合

查找后台

site:xx.com intext:管理

site:xx.com inurl:login

site:xx.com intitle:后台

查看服务器使用的程序

site:xx.com filetype:asp

site:xx.com filetype:php

site:xx.com filetype:jsp

site:xx.com filetype:aspx

查看上传漏洞

site:xx.com inurl:file

site:xx.com inurl:load

查找注射点

site:xx.com filetype:asp



##### github常用搜索语法

tips：

 有关可以添加到任何搜索限定符以进一步改善结果的搜索语法列表，请参阅“[了解搜索语法](https://links.jianshu.com/go?to=https%3A%2F%2Fdocs.github.com%2Fcn%2Ffree-pro-team%40latest%2Farticles%2Funderstanding-the-search-syntax)”。

对多个字词的搜索词使用引号。 例如，如果要搜索具有标签 "In progress" 的议题，可搜索 `label:"in progress"`。 搜索不区分大小写。

###### 按仓库名称、说明或自述文件内容搜索

通过 `in` 限定符，您可以将搜索限制为仓库名称、仓库说明、自述文件内容或这些的任意组合。 如果省略此限定符，则只搜索仓库名称和说明。

| 限定符            | 示例                                                         |
| ----------------- | ------------------------------------------------------------ |
| `in:name`         | **jquery in:name** matches repositories with "jquery" in the repository name. |
| `in:description`  | **jquery in:name,description** matches repositories with "jquery" in the repository name or description. |
| `in:readme`       | **jquery in:readme**  matches repositories mentioning "jquery" in the repository's README file. |
| `repo:owner/name` | **repo:octocat/hello-world** 匹配特定仓库名称。              |



###### 基于仓库的内容搜索

除了使用 `in:readme` 以外，无法通过搜索仓库内的特定内容来查找仓库。 要搜索仓库内的特定文件或内容，您可以使用查找器或代码特定的搜索限定符。

| 限定符      | 示例                                                         |
| ----------- | ------------------------------------------------------------ |
| `in:readme` | **octocat in:readme** matches repositories mentioning "octocat" in the repository's README file. |



###### 在用户或组织的仓库内搜索

### 在用户或组织的仓库内搜索

要在特定用户或组织拥有的所有仓库中搜索，您可以使用 `user` 或 `org` 限定符。

| 限定符            | 示例                                                         |
| ----------------- | ------------------------------------------------------------ |
| `user:*USERNAME*` | **user:defunkt forks:>100** 匹配来自 @defunkt、拥有超过 100 复刻的仓库。 |
| `org:*ORGNAME*`   | **org:github** 匹配来自 GitHub 的仓库。                      |



###### 按仓库大小搜索

The `size` qualifier finds repositories that match a certain size (in kilobytes), using greater than, less than, and range qualifiers 

“size”限定符使用“大于”、“小于”和“范围”限定符查找匹配特定大小(以千字节为单位)的存储库

| 限定符     | 示例                                                   |
| ---------- | ------------------------------------------------------ |
| `size:*n*` | **size:1000** 匹配恰好为 1 MB 的仓库。                 |
|            | **size:>=30000** 匹配至少为 30 MB 的仓库。             |
|            | **size:<50** 匹配小于 50 KB 的仓库。                   |
|            | **size:50..120** 匹配介于 50 KB 与 120 KB 之间的仓库。 |



###### 按关注者数量搜索

| 限定符          | 示例                                                         |
| --------------- | ------------------------------------------------------------ |
| `followers:*n*` | **node followers:>=10000** 匹配有 10,000 或更多关注者提及文字 "node" 的仓库。 |
|                 | **styleguide linter followers:1..10** 匹配拥有 1 到 10 个关注者并且提及 "styleguide linter" 一词的的仓库。 |



###### 按复刻数量搜索

| 限定符      | 示例                                              |
| ----------- | ------------------------------------------------- |
| `forks:*n*` | **forks:5** 匹配具有至少 205 个复刻的仓库。       |
|             | **forks:<90** 匹配具有少于 90 个复刻的仓库。      |
|             | **forks:10..20** 匹配具有 10 到 20 个复刻的仓库。 |



###### 按星号数量搜索

| 限定符      | 示例                                                         |
| ----------- | ------------------------------------------------------------ |
| `stars:*n*` | **stars:500** 匹配恰好具有 500 个星号的仓库。                |
|             | **stars:10..20** 匹配具有 10 到 20 个星号、小于 1000 KB 的仓库。 |
|             | **stars:>=500 fork:true language:php** 匹配具有至少 500 个星号，包括复刻的星号（以 PHP 编写）的仓库。 |



###### 按仓库创建或上次更新时间搜索

您可以基于创建时间或上次更新时间过滤仓库。 对于仓库创建，您可以使用 `created` 限定符；要了解仓库上次更新的时间，您要使用 `pushed` 限定符。 `pushed` 限定符将返回仓库列表，按仓库中任意分支上最近进行的提交排序。

两者均采用日期作为参数。 日期格式必须遵循 [ISO8601](https://links.jianshu.com/go?to=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FISO_8601)标准，即 `YYYY-MM-DD`（年-月-日）。 您也可以在日期后添加可选的时间信息 `THH:MM:SS+00:00`，以便按小时、分钟和秒进行搜索。 这是 `T`，随后是 `HH:MM:SS`（时-分-秒）和 UTC 偏移 (`+00:00`)。

| 限定符                 | 示例                                                         |
| ---------------------- | ------------------------------------------------------------ |
| `created:*YYYY-MM-DD*` | **webos created:<2011-01-01** 匹配具有 "webos" 字样、在 2011 年之前创建的仓库。 |
| `pushed:*YYYY-MM-DD*`  | **css pushed:>2013-02-01** 匹配具有 "css" 字样、在 2013 年 1 月之后收到推送的仓库。 |
|                        | **case pushed:>=2013-03-06 fork:only** 匹配具有 "case" 字样、在 2013 年 3 月 6 日或之后收到推送并且作为复刻的仓库。 |

###### 按语言搜索

| 限定符                | 示例                                                         |
| --------------------- | ------------------------------------------------------------ |
| `language:*LANGUAGE*` | **rails language:javascript** 匹配具有 "rails" 字样、以 JavaScript 编写的仓库。 |

###### 按主题搜索

| 限定符          | 示例                                                |
| --------------- | --------------------------------------------------- |
| `topic:*TOPIC*` | **topic:jekyll** 匹配已归类为 "jekyll" 主题的仓库。 |

###### 按主题数量搜索

| 限定符       | 示例                                   |
| ------------ | -------------------------------------- |
| `topics:*n*` | **topics:5** 匹配具有五个主题的仓库。  |
|              | **topics:>3** 匹配超过三个主题的仓库。 |

###### 按许可搜索

| 限定符                      | 示例                                                         |
| --------------------------- | ------------------------------------------------------------ |
| `license:*LICENSE_KEYWORD*` | **license:apache-2.0** 匹配根据 Apache License 2.0 授权的仓库。 |

###### 基于仓库是否为镜像搜索

### 基于仓库是否为镜像搜索

| 限定符         | 示例                                                         |
| -------------- | ------------------------------------------------------------ |
| `mirror:true`  | **mirror:true GNOME**  matches repositories that are mirrors and contain the word "GNOME." |
| `mirror:false` | **mirror:false GNOME**  matches repositories that are not mirrors and contain the word "GNOME." |



###### 基于仓库是否已存档搜索

| 限定符           | 示例                                                         |
| ---------------- | ------------------------------------------------------------ |
| `archived:true`  | **archived:true GNOME**  matches repositories that are archived and contain the word "GNOME." |
| `archived:false` | **archived:false GNOME** matches repositories that are not archived and contain the word "GNOME." |



###### 基于具有 `good first issue` 或 `help wanted` 标签的议题数量搜索

您可以使用限定符 `help-wanted-issues:>n` 和 `good-first-issues:>n` 搜索具有最少数量标签为 `help-wanted` 或 `good-first-issue` 议题的仓库。。

| 限定符                  | 示例                                                         |
| ----------------------- | ------------------------------------------------------------ |
| `good-first-issues:>n`  | **good-first-issues:>2 javascript**  匹配具有超过两个标签为 `good-first-issue` 的议题且包含 "javascript" 字样的仓库。 |
| `help-wanted-issues:>n` | **help-wanted-issues:>4 react**  匹配具有超过四个标签为 `help-wanted` 的议题且包含 "React" 字样的仓库。 |



### 域名/ip/网站信息

### 蜜罐探测
### 主机存活探测/端口扫描
### 信息泄露、敏感文件、敏感目录、后台目录、物理路径探测 